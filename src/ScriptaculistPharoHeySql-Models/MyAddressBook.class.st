Class {
	#name : #MyAddressBook,
	#superclass : #HeySql,
	#instVars : [
		'contacts',
		'displayName'
	],
	#category : #'ScriptaculistPharoHeySql-Models'
}

{ #category : #utility }
MyAddressBook class >> createFetchMethods [
| dict |
dict := Dictionary
		newFrom:
			{('fetchAll' -> 'select * from myaddressbook')}.
	self generateSqlMethods: dict.
]

{ #category : #accessor }
MyAddressBook class >> fetchAll [ 
	     "Autogenerated heysql-method"
	     | result |
	     result := self executePreparedStatementSafe: 'fetchAll_MyAddressBook' values: {  }.
	     ^ (self toObject: result).
	    
]

{ #category : #accessing }
MyAddressBook >> addContact: aContact [
	self contacts add: aContact. 
]

{ #category : #accessing }
MyAddressBook >> contacts [
	| fetchedContacts |
	contacts ifNil: [ 
			id ifNotNil: [ 
				fetchedContacts := MyContact forAddressBook: self. 
				fetchedContacts ifNotNil: [  
					(fetchedContacts isKindOf: MyContact)
						ifTrue: [ 
							contacts := OrderedCollection new. 
							contacts add: fetchedContacts 
						] 
						ifFalse: [ contacts := fetchedContacts asOrderedCollection ]
				]
			]. 
			contacts ifNil: [ contacts := OrderedCollection new ] 
	]. 
	^contacts. 
]

{ #category : #accessing }
MyAddressBook >> displayName [
	^ displayName
]

{ #category : #accessing }
MyAddressBook >> displayName: anObject [
	displayName := anObject
]
