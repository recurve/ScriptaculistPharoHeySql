Class {
	#name : #MyAddressBookMigrations,
	#superclass : #Object,
	#category : #ScriptaculistPharoHeySql
}

{ #category : #'db-migration' }
MyAddressBookMigrations class >> migrate_2021_03_10T01_01_12Z [
	   "HeySql autogenerated method for adding a migration. Add your code below here."
	   | table |

		
"-- Generated code for class: MyAddressBook"
	
		table := { 
         ( 'id' -> 'serial primary key') . 
			( 'displayName' -> 'varchar(255)' )
       } asDictionary. 
			
	    HeySql createTable: 'myaddressbook' tableDict: table.
			
			
"-- Generated code for class: MyContact"
	
		table := { 
         ( 'surname' -> 'varchar(255)') . 
         ( 'dateOfBirth' -> 'timestamp') . 
         ( 'firstName' -> 'varchar(255)') . 
         ( 'telephoneNumber' -> 'varchar(255)') . 
         ( 'id' -> 'serial primary key') . 
         ( 'emailAddress' -> 'varchar(255)') . 
         ( 'addressBookId' -> 'integer references myaddressbook (id) not null') 
       } asDictionary. 
			
	    HeySql createTable: 'mycontact' tableDict: table.

		HeySql sharedClient execute: 'CREATE INDEX idx_mycontact_addressbookid ON mycontact (addressbookid)'.
			
	
	
	
]
